{
  "AltLookAngle": {
    "x": 0,
    "y": 0,
    "z": 0
  },
  "Autoraise": true,
  "Bag": {
    "Order": 0
  },
  "ColorDiffuse": {
    "b": 0,
    "g": 1,
    "r": 0.153870881
  },
  "ContainedObjects_path": "b172b0",
  "Description": "tfamat",
  "DragSelectable": true,
  "GMNotes": "",
  "GUID": "b172b0",
  "Grid": true,
  "GridProjection": false,
  "Hands": false,
  "HideWhenFaceDown": false,
  "IgnoreFoW": false,
  "LayoutGroupSortIndex": 0,
  "Locked": false,
  "LuaScript": "---\r\n--- Generated by EmmyLua(https://github.com/EmmyLua)\r\n--- Created by Whimsical.\r\n--- DateTime: 2021-03-16 3:26 p.m.\r\n---\r\n\r\n--- Original Memory Bag by MrStump\r\n--- https://steamcommunity.com/sharedfiles/filedetails/?id=953770080\r\n\r\n---@class MemoryListEntry\r\n---@field public position Vector\r\n---@field public rotation Vector\r\n---@field public lock boolean\r\nlocal MemoryListEntry={}\r\n\r\n---@type table\u003cstring, MemoryListEntry\u003e\r\nlocal memory_list = {}\r\n\r\nlocal POSTFIX = {\r\n    SAVE = \"_memory_object\",\r\n    ZONE = \"_memory_zone\",\r\n    SHUFFLE = \"_memory_shuffle\"\r\n}\r\n\r\n---@type table\u003cstring, any\u003e\r\nlocal BUTTON = {\r\n    POSITION = Vector(0, 0.3, -2),\r\n    ROTATION = Vector(0, 180, 0),\r\n    HEIGHT = 350,\r\n    WIDTH = 800,\r\n    FONT_SIZE = 250,\r\n    COLOR = Color.Black,\r\n    FONT_COLOR = Color.White\r\n}\r\n\r\nlocal ipairs = ipairs\r\nlocal pairs = pairs\r\n\r\n---@return string\r\nlocal function get_prefix()\r\n    return self:getDescription()\r\nend\r\n\r\nlocal function updateSave()\r\n    local data_to_save = {[\"ml\"]=memory_list}\r\n    local saved_data = JSON.encode(data_to_save)\r\n    self.script_state = saved_data\r\nend\r\n\r\n---@param label string\r\n---@param action string\r\nlocal function createButton(label, action)\r\n    self:clearButtons()\r\n\r\n    ---@type CreateClassicUIButton\r\n    local parameters = {\r\n        label = label,\r\n        click_function = action,\r\n        function_owner = self\r\n    }\r\n\r\n    for key, value in pairs(BUTTON) do\r\n        parameters[key:lower()] = value\r\n    end\r\n\r\n    self:createButton(parameters)\r\nend\r\n\r\nlocal function create_place_button() createButton(\"Place\", \"place_objects\") end\r\nlocal function create_recall_button() createButton(\"Recall\", \"recall_objects\") end\r\n\r\n---@param tag string\r\n---@param lock boolean\r\n---@return fun(object:TTSObject)\r\nlocal function create_object_callback(tag, lock)\r\n    ---@param object TTSObject\r\n    return function (object)\r\n        object:setLock(lock)\r\n        if object:hasTag(tag) then object:shuffle() end\r\n    end\r\nend\r\n\r\n---@param object TTSObject\r\nlocal function record_objects(object)\r\n    memory_list[object:getGUID()] = {\r\n        position = object:getPosition(),\r\n        rotation = object:getRotation(),\r\n        lock = object:getLock()\r\n    }\r\n    self:putObject(object)\r\nend\r\n\r\n---@param objects TTSObject[]\r\nlocal function update_objects(objects)\r\n    for _, object in ipairs(objects) do\r\n        record_objects(object)\r\n    end\r\nend\r\n\r\n--Sends objects from bag/table to their saved position/rotation\r\nfunction place_objects()\r\n    local prefix = get_prefix()\r\n    local shuffle_tag = prefix .. POSTFIX.SHUFFLE\r\n    local content = self.getObjects()\r\n\r\n    for _, item in ipairs(content) do\r\n        local entry = memory_list[item.guid]\r\n        if entry then\r\n            self.takeObject {\r\n                guid=item.guid,\r\n                position=entry.position,\r\n                rotation=entry.rotation,\r\n                callback_function = create_object_callback(shuffle_tag, entry.lock)\r\n            }\r\n        end\r\n    end\r\n\r\n    broadcastToAll(\"Objects Placed\", {1,1,1})\r\n    create_recall_button()\r\nend\r\n\r\n--Recalls objects to bag from table\r\nfunction recall_objects()\r\n    memory_list = {}\r\n    local prefix = get_prefix()\r\n\r\n    if prefix==\"\" then\r\n        broadcastToAll(\"Error in Memory Bag: Tag prefix not set.\")\r\n        return\r\n    end\r\n\r\n    local save_tag = prefix .. POSTFIX.SAVE\r\n    local zone_tag = prefix .. POSTFIX.ZONE\r\n\r\n    local zones = getObjectsWithTag(zone_tag)\r\n    if #zones\u003e0 then\r\n        for _, zone in ipairs(zones) do\r\n            update_objects(zone:getObjects())\r\n        end\r\n    else\r\n        update_objects(getObjectsWithTag(save_tag))\r\n    end\r\n    updateSave()\r\n    broadcastToAll(\"Objects Recalled\", {1,1,1})\r\n    create_place_button()\r\nend\r\n\r\nfunction onload(saved_data)\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        --Set up information off of loaded_data\r\n        memory_list = loaded_data.ml\r\n    else\r\n        --Set up information for if there is no saved saved data\r\n        memory_list = {}\r\n    end\r\n\r\n    if self:getQuantity()==0 then\r\n        create_recall_button()\r\n    else\r\n        create_place_button()\r\n    end\r\nend",
  "LuaScriptState_path": "TheForgottenAge.b172b0.txt",
  "LuaScript_path": "TheForgottenAge.b172b0.ttslua",
  "MaterialIndex": -1,
  "MeasureMovement": false,
  "MeshIndex": -1,
  "Name": "Bag",
  "Nickname": "The Forgotten Age",
  "Snap": true,
  "Sticky": true,
  "Tags": [
    "playmat_memory_object"
  ],
  "Tooltip": true,
  "Transform": {
    "posX": 45.63946,
    "posY": 1.10299766,
    "posZ": -61.2087135,
    "rotX": 359.979156,
    "rotY": 89.98523,
    "rotZ": 359.983215,
    "scaleX": 1,
    "scaleY": 1,
    "scaleZ": 1
  },
  "Value": 0,
  "XmlUI": ""
}